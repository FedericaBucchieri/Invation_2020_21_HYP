<template>
  <div class="intro-page-content">
    <!-- ***** Welcome area start ***** -->
    <welcome-area-start
      :text-button="textButton"
      :link="'#' + generalLink"
      :paths-list="pathsList"
      :big-image="bigImage"
    >
      <template #title><slot name="welcome-title"></slot> </template>
      <template #overview><slot name="welcome-overview"></slot> </template>
    </welcome-area-start>
    <!-- ***** Welcome area end ***** -->

    <!--**** Photogallery area starts ****-->
    <!-- <photo-gallery :img-list="invationsDemo"> </photo-gallery> -->
    <!-- <base-gallery :imgList="invationsDemo"></base-gallery> -->
    <decoration-slide-show
      :slide-objects="slideObjects"
      :title="slideObjectTitle"
      :introduction="slideObjectIntro"
    ></decoration-slide-show>
    <!--**** Photogallery area ends ****-->

    <!-- ***** All entities area starts ***** -->
    <section :id="generalLink">
      <slot name="entitiesList" :entities="entities"></slot>
    </section>
    <!-- ***** All entities area ends ***** -->
  </div>
</template>

<script>
// import BaseGallery from './baseElements/BaseGallery.vue'
import DecorationSlideShow from './decoration/DecorationSlideShow.vue'
import WelcomeAreaStart from '~/components/baseElements/WelcomeAreaStart.vue'
// import PhotoGallery from '~/components/baseElements/PhotoGallery.vue'

export default {
  components: {
    WelcomeAreaStart,
    // PhotoGallery,
    // BaseGallery,
    DecorationSlideShow,
  },
  props: {
    textButton: { type: String, default: () => '' },
    areaName: { type: String, default: () => '' },
    bigImage: { type: String, default: () => '' },
    generalLink: { type: String, default: () => '' },
    pathsList: { type: Array, default: () => [] },
    slideObjects: { type: Array, default: () => [] },
    slideObjectTitle: { type: String, default: () => '' },
    slideObjectIntro: { type: String, default: () => '' },
  },
  data() {
    return {
      thisGeneralLink: this.generalLink,
      // necessary to define the data provided by fetch
      invationsDemo: [],
      entities: [],
    }
  },
  // problem: https://nuxtjs.org/docs/2.x/features/data-fetching#async-data-in-components
  // solution: https://nuxtjs.org/docs/2.x/features/data-fetching#the-fetch-hook
  async fetch() {
    const invationsDemoData = await this.$axios.get(
      `${process.env.BASE_URL}/api/invations10`
    )
    this.invationsDemo = invationsDemoData.data

    const entitesData = await this.$axios.get(
      `${process.env.BASE_URL}/api/${this.generalLink}`
    )
    this.entities = entitesData.data
  },
  // SSR best-practice? - to ask
  fetchOnServer: true,
}
</script>

<style scoped>
.featured-box {
  text-align: center;
}

.featured-box h3 {
  color: #fff;
  font-weight: 600;
  font-size: 32px;
  text-align: center;
  padding: 25px;
}

.featured-box > img {
  max-width: 100%;
  height: auto;
}
</style>
